/* empty css             */import{c as $}from"./api-T6i8Iy3l.js";import{i as L}from"./linesGL-BGNsp3BH.js";import{r as h,aN as P,aO as M,al as N,d as j,aP as H,aF as x,w as R,K as V,h as G,Q as K,aQ as Q,aE as S,a5 as Z,n as D,a8 as z,aR as C,aB as B,ae as I,ai as q,aS as Y,_ as J,o as O,a as w,c as E,e as g}from"./index-BzedtgrD.js";import{a as U}from"./axios-Ho5vHysa.js";import"./jspdf.es.min-YSKlW3u3.js";function W(t){let e;const o=h(!1),a=P({...t,originalPosition:"",originalOverflow:"",visible:!1});function m(s){a.text=s}function i(){const s=a.parent,d=l.ns;if(!s.vLoadingAddClassList){let c=s.getAttribute("loading-number");c=Number.parseInt(c)-1,c?s.setAttribute("loading-number",c.toString()):(S(s,d.bm("parent","relative")),s.removeAttribute("loading-number")),S(s,d.bm("parent","hidden"))}p(),n.unmount()}function p(){var s,d;(d=(s=l.$el)==null?void 0:s.parentNode)==null||d.removeChild(l.$el)}function u(){var s;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=window.setTimeout(y,400),a.visible=!1,(s=t.closed)==null||s.call(t))}function y(){if(!o.value)return;const s=a.parent;o.value=!1,s.vLoadingAddClassList=void 0,i()}const f=j({name:"ElLoading",setup(s,{expose:d}){const{ns:c,zIndex:v}=H("loading");return d({ns:c,zIndex:v}),()=>{const r=a.spinner||a.svg,b=x("svg",{class:"circular",viewBox:a.svgViewBox?a.svgViewBox:"0 0 50 50",...r?{innerHTML:r}:{}},[x("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),T=a.text?x("p",{class:c.b("text")},[a.text]):void 0;return x(Q,{name:c.b("fade"),onAfterLeave:y},{default:R(()=>[V(G("div",{style:{backgroundColor:a.background||""},class:[c.b("mask"),a.customClass,a.fullscreen?"is-fullscreen":""]},[x("div",{class:c.b("spinner")},[b,T])]),[[K,a.visible]])])})}}}),n=M(f),l=n.mount(document.createElement("div"));return{...N(a),setText:m,removeElLoadingChild:p,close:u,handleAfterLeave:y,vm:l,get $el(){return l.$el}}}let _;const X=function(t={}){if(!Z)return;const e=ee(t);if(e.fullscreen&&_)return _;const o=W({...e,closed:()=>{var m;(m=e.closed)==null||m.call(e),e.fullscreen&&(_=void 0)}});te(e,e.parent,o),k(e,e.parent,o),e.parent.vLoadingAddClassList=()=>k(e,e.parent,o);let a=e.parent.getAttribute("loading-number");return a?a=`${Number.parseInt(a)+1}`:a="1",e.parent.setAttribute("loading-number",a),e.parent.appendChild(o.$el),D(()=>o.visible.value=e.visible),e.fullscreen&&(_=o),o},ee=t=>{var e,o,a,m;let i;return z(t.target)?i=(e=document.querySelector(t.target))!=null?e:document.body:i=t.target||document.body,{parent:i===document.body||t.body?document.body:i,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:i===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(a=t.lock)!=null?a:!1,customClass:t.customClass||"",visible:(m=t.visible)!=null?m:!0,beforeClose:t.beforeClose,closed:t.closed,target:i}},te=async(t,e,o)=>{const{nextZIndex:a}=o.vm.zIndex||o.vm._.exposed.zIndex,m={};if(t.fullscreen)o.originalPosition.value=C(document.body,"position"),o.originalOverflow.value=C(document.body,"overflow"),m.zIndex=a();else if(t.parent===document.body){o.originalPosition.value=C(document.body,"position"),await D();for(const i of["top","left"]){const p=i==="top"?"scrollTop":"scrollLeft";m[i]=`${t.target.getBoundingClientRect()[i]+document.body[p]+document.documentElement[p]-Number.parseInt(C(document.body,`margin-${i}`),10)}px`}for(const i of["height","width"])m[i]=`${t.target.getBoundingClientRect()[i]}px`}else o.originalPosition.value=C(e,"position");for(const[i,p]of Object.entries(m))o.$el.style[i]=p},k=(t,e,o)=>{const a=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?S(e,a.bm("parent","relative")):B(e,a.bm("parent","relative")),t.fullscreen&&t.lock?B(e,a.bm("parent","hidden")):S(e,a.bm("parent","hidden"))},A=Symbol("ElLoading"),F=(t,e)=>{var o,a,m,i;const p=e.instance,u=s=>I(e.value)?e.value[s]:void 0,y=s=>{const d=z(s)&&(p==null?void 0:p[s])||s;return d&&h(d)},f=s=>y(u(s)||t.getAttribute(`element-loading-${Y(s)}`)),n=(o=u("fullscreen"))!=null?o:e.modifiers.fullscreen,l={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:n,target:(a=u("target"))!=null?a:n?void 0:t,body:(m=u("body"))!=null?m:e.modifiers.body,lock:(i=u("lock"))!=null?i:e.modifiers.lock};t[A]={options:l,instance:X(l)}},oe=(t,e)=>{for(const o of Object.keys(e))q(e[o])&&(e[o].value=t[o])},ae={mounted(t,e){e.value&&F(t,e)},updated(t,e){const o=t[A];e.oldValue!==e.value&&(e.value&&!e.oldValue?F(t,e):e.value&&e.oldValue?I(e.value)&&oe(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[A])==null||e.instance.close(),t[A]=null}},le={class:"chart-box"},se={class:"result-main"},ne={class:"chart-main"},re={class:"card-item","element-loading-text":"Loading...","element-loading-background":"rgba(122, 122, 122, 0)"},ie={__name:"ValueSpace",setup(t,{expose:e}){const o=h(!1);var a=null,m=["#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361","#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361","#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361","#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361"];function i(f){console.log(f),u!=null&&u.dispose&&u.dispose(),u=L(p.value);const n="path://M1 11C6.52285 11 11 6.52285 11 1H13C13 6.52285 17.4772 11 23 11V13C17.4772 13 13 17.4772 13 23H11C11 17.4772 6.52285 13 1 13V11Z",l=[{type:"scatter3D",data:f.model,symbolSize:24,symbol:n,itemStyle:{opacity:1},label:{show:!0,formatter:"{b}",textStyle:{color:"#fff",fontSize:16,backgroundColor:"rgba(255,255,255,0)"}}}];f.model.forEach((c,v)=>{const r=f.node.slice(v*30,v*30+30);l.push({name:c.name,type:"scatter3D",data:r,symbolSize:8,symbol:n,label:{show:!1,formatter:""},itemStyle:{color:m[v],opacity:1}})}),l.push({name:"Geocultural sphere",type:"scatter3D",data:f.culture,symbolSize:18,itemStyle:{opacity:1,color:"#1093FF"},label:{show:!0,formatter:"{b}",textStyle:{color:"#fff",fontSize:16,backgroundColor:"rgba(255,255,255,0)"}}}),a=Object.assign([],l);const s={legend:{show:!0,width:"1100",textStyle:{color:"#fff"}},tooltip:{appendToBody:!0,className:"tooltip",hideDelay:1e3,enterable:!0,triggerOn:"click",backgroundColor:"#0A111F",borderColor:"#0A111F",textStyle:{color:"#fff"},formatter:function(c){return c.data.type=="node"?`<div style="padding: 6px 28px;">
                  <pre style="text-align: left; white-space: pre-line;">${c.data.name}</pre>
                </div>`:""}},xAxis3D:{type:"value"},yAxis3D:{type:"value"},zAxis3D:{type:"value"},grid3D:{axisLine:{lineStyle:{color:"rgba(255,255,255,0.3)"}},axisPointer:{show:!1},splitLine:{lineStyle:{color:"rgba(255,255,255,0.3)"}},viewControl:{autoRotate:!0,autoRotateSpeed:2,autoRotateAfterStill:1,distance:130},top:"6%"},series:l};u.setOption(s);var d=!1;u.on("click",function(c){const v=u.getOption().series;c.data.type=="model"&&(d=!0,v.forEach(r=>{r.name&&r.name!=c.name&&(r.itemStyle={opacity:.1}),r.name||r.data.forEach(b=>{b.name!=c.name&&(b.itemStyle={opacity:.1})})}),u.setOption({series:v}))}),u.on("mousemove",function(c){d&&(u.setOption({series:a}),d=!1)})}const p=h(null);let u=null;return e({setValueSpacesData:async f=>{if(f.length==0)return;const n=f.map(function(l){return l.model_name});console.log(n),o.value=!0,$({input:n}).then(l=>{console.log(l);let d=l.data;const c={culture:[],model:[],node:[]};c.culture=d.tsne_cultures.map((v,r)=>({name:d.tsne_culture_caption[r],value:v})),c.model=d.tsne_models.map((v,r)=>({name:d.tsne_model_caption[r],value:v,type:"model",itemStyle:{color:m[r],opacity:1}})),i(c)}).catch(l=>{console.log("err")}).finally(()=>{o.value=!1})}}),O(async()=>{await D()}),(f,n)=>{const l=ae;return w(),E("div",null,[g("div",le,[g("div",se,[g("div",ne,[V((w(),E("div",re,[g("div",{class:"chart",style:{width:"1180px",height:"700px","background-color":"#121f37",padding:"2em 0","border-radius":"0.5em"},ref_key:"chartDom",ref:p},null,512)])),[[l,o.value]])]),n[0]||(n[0]=g("p",{style:{"text-align":"center",color:"#747474","margin-top":"2.25em"}}," The value space is a t-SNE visualization that maps the 10-dimensional value vectors of different models and countries to a lower-dimensional space. ",-1))])])])}}},ge=J(ie,[["__scopeId","data-v-29984c17"]]),ce={class:""},be={__name:"CulturalAlignment",setup(t,{expose:e}){const o=h([]),a=h(null);let m=null;const i=h(),p=h();let u=[];const y=async()=>U.get("./data/value_sim_heatmap.json").then(n=>{console.log(n),i.value=n.data;const l={};for(let s=0;s<n.data.models.length;s++)l[n.data.models[s]]=n.data.cosine_sim_matrix[s];p.value=l}),f=n=>{o.value=n;let l=[];if(n&&n.length>0){let r=[];for(var s=0;s<n.length;s++)r.push(p.value[n[s]]);l={cosine_sim_matrix:r,models:n,countries:u}}else l={cosine_sim_matrix:[],models:[],countries:u};console.log("modelNameList",n,l);var d=[];for(let r=0;r<l.cosine_sim_matrix.length;r++)if(l.cosine_sim_matrix[r])for(let b=0;b<l.countries.length;b++)d.push([r,b,l.cosine_sim_matrix[r][b]]);const c=l.models,v=d.map(function(r){return[r[1],r[0],(r[2]*100).toFixed(3)||"-"]});m.setOption({yAxis:{type:"category",data:c,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},series:[{name:"Punch Card",type:"heatmap",data:v,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})};return e({setHotChart:f}),O(async()=>{await y(),await D(),u=i.value.countries;const n=i.value.models;m=L(a.value);const l={tooltip:{position:"top"},grid:{height:"60%",top:"10%",left:"2%",containLabel:!0},xAxis:{type:"category",data:u,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},yAxis:{type:"category",data:n,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",left:"center",bottom:"10%",color:["#CF1322","#FFA39E","#eeeeee","#91D5FF","#096DD9"],textStyle:{color:"#000"}}};m.setOption(l),f(o.value)}),(n,l)=>(w(),E("div",null,[g("div",ce,[g("div",null,[g("div",null,[g("div",{class:"chart",ref_key:"chartDom",ref:a,style:{width:"1200px",height:"600px",margin:"0 auto"}},null,512),l[0]||(l[0]=g("p",{style:{"text-align":"center",color:"#747474"}},"The heatmap illustrates the Pearson correlation between the values of various models and countries.",-1))])])])]))}};export{ge as V,be as _};
