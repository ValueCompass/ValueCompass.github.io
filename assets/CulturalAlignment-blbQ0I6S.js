import"./jspdf.es.min-Y5ppame2.js";import{c as T,i as L}from"./linesGL-C_ZBgXp_.js";import{r as y,ar as j,bn as M,aG as P,d as N,bo as H,b7 as x,w as R,L as V,h as G,S as Z,ao as q,b6 as S,aj as K,n as w,aw as I,bc as _,b4 as B,at as z,aE as Y,bp as J,_ as Q,o as $,a as D,c as E,e as g,p as U,j as W}from"./index-D0qidSqa.js";import{a as X}from"./common-CQwEJmn7.js";function ee(t){let e;const o=y(!1),a=j({...t,originalPosition:"",originalOverflow:"",visible:!1});function m(l){a.text=l}function i(){const l=a.parent,d=s.ns;if(!l.vLoadingAddClassList){let c=l.getAttribute("loading-number");c=Number.parseInt(c)-1,c?l.setAttribute("loading-number",c.toString()):(S(l,d.bm("parent","relative")),l.removeAttribute("loading-number")),S(l,d.bm("parent","hidden"))}p(),n.unmount()}function p(){var l,d;(d=(l=s.$el)==null?void 0:l.parentNode)==null||d.removeChild(s.$el)}function u(){var l;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=window.setTimeout(h,400),a.visible=!1,(l=t.closed)==null||l.call(t))}function h(){if(!o.value)return;const l=a.parent;o.value=!1,l.vLoadingAddClassList=void 0,i()}const f=N({name:"ElLoading",setup(l,{expose:d}){const{ns:c,zIndex:v}=H("loading");return d({ns:c,zIndex:v}),()=>{const r=a.spinner||a.svg,b=x("svg",{class:"circular",viewBox:a.svgViewBox?a.svgViewBox:"0 0 50 50",...r?{innerHTML:r}:{}},[x("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),O=a.text?x("p",{class:c.b("text")},[a.text]):void 0;return x(q,{name:c.b("fade"),onAfterLeave:h},{default:R(()=>[V(G("div",{style:{backgroundColor:a.background||""},class:[c.b("mask"),a.customClass,a.fullscreen?"is-fullscreen":""]},[x("div",{class:c.b("spinner")},[b,O])]),[[Z,a.visible]])])})}}}),n=M(f),s=n.mount(document.createElement("div"));return{...P(a),setText:m,removeElLoadingChild:p,close:u,handleAfterLeave:h,vm:s,get $el(){return s.$el}}}let C;const te=function(t={}){if(!K)return;const e=oe(t);if(e.fullscreen&&C)return C;const o=ee({...e,closed:()=>{var m;(m=e.closed)==null||m.call(e),e.fullscreen&&(C=void 0)}});ae(e,e.parent,o),k(e,e.parent,o),e.parent.vLoadingAddClassList=()=>k(e,e.parent,o);let a=e.parent.getAttribute("loading-number");return a?a=`${Number.parseInt(a)+1}`:a="1",e.parent.setAttribute("loading-number",a),e.parent.appendChild(o.$el),w(()=>o.visible.value=e.visible),e.fullscreen&&(C=o),o},oe=t=>{var e,o,a,m;let i;return I(t.target)?i=(e=document.querySelector(t.target))!=null?e:document.body:i=t.target||document.body,{parent:i===document.body||t.body?document.body:i,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:i===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(a=t.lock)!=null?a:!1,customClass:t.customClass||"",visible:(m=t.visible)!=null?m:!0,beforeClose:t.beforeClose,closed:t.closed,target:i}},ae=async(t,e,o)=>{const{nextZIndex:a}=o.vm.zIndex||o.vm._.exposed.zIndex,m={};if(t.fullscreen)o.originalPosition.value=_(document.body,"position"),o.originalOverflow.value=_(document.body,"overflow"),m.zIndex=a();else if(t.parent===document.body){o.originalPosition.value=_(document.body,"position"),await w();for(const i of["top","left"]){const p=i==="top"?"scrollTop":"scrollLeft";m[i]=`${t.target.getBoundingClientRect()[i]+document.body[p]+document.documentElement[p]-Number.parseInt(_(document.body,`margin-${i}`),10)}px`}for(const i of["height","width"])m[i]=`${t.target.getBoundingClientRect()[i]}px`}else o.originalPosition.value=_(e,"position");for(const[i,p]of Object.entries(m))o.$el.style[i]=p},k=(t,e,o)=>{const a=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?S(e,a.bm("parent","relative")):B(e,a.bm("parent","relative")),t.fullscreen&&t.lock?B(e,a.bm("parent","hidden")):S(e,a.bm("parent","hidden"))},A=Symbol("ElLoading"),F=(t,e)=>{var o,a,m,i;const p=e.instance,u=l=>z(e.value)?e.value[l]:void 0,h=l=>{const d=I(l)&&(p==null?void 0:p[l])||l;return d&&y(d)},f=l=>h(u(l)||t.getAttribute(`element-loading-${J(l)}`)),n=(o=u("fullscreen"))!=null?o:e.modifiers.fullscreen,s={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:n,target:(a=u("target"))!=null?a:n?void 0:t,body:(m=u("body"))!=null?m:e.modifiers.body,lock:(i=u("lock"))!=null?i:e.modifiers.lock};t[A]={options:s,instance:te(s)}},le=(t,e)=>{for(const o of Object.keys(e))Y(e[o])&&(e[o].value=t[o])},se={mounted(t,e){e.value&&F(t,e)},updated(t,e){const o=t[A];e.oldValue!==e.value&&(e.value&&!e.oldValue?F(t,e):e.value&&e.oldValue?z(e.value)&&le(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[A])==null||e.instance.close(),t[A]=null}},ne=t=>(U("data-v-29984c17"),t=t(),W(),t),re={class:"chart-box"},ie={class:"result-main"},ce={class:"chart-main"},ue={class:"card-item","element-loading-text":"Loading...","element-loading-background":"rgba(122, 122, 122, 0)"},de=ne(()=>g("p",{style:{"text-align":"center",color:"#747474","margin-top":"2.25em"}}," The value space is a t-SNE visualization that maps the 10-dimensional value vectors of different models and countries to a lower-dimensional space. ",-1)),me={__name:"ValueSpace",setup(t,{expose:e}){const o=y(!1);var a=null,m=["#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361","#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361","#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361","#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361"];function i(f){console.log(f),u!=null&&u.dispose&&u.dispose(),u=L(p.value);const n="path://M1 11C6.52285 11 11 6.52285 11 1H13C13 6.52285 17.4772 11 23 11V13C17.4772 13 13 17.4772 13 23H11C11 17.4772 6.52285 13 1 13V11Z",s=[{type:"scatter3D",data:f.model,symbolSize:24,symbol:n,itemStyle:{opacity:1},label:{show:!0,formatter:"{b}",textStyle:{color:"#fff",fontSize:16,backgroundColor:"rgba(255,255,255,0)"}}}];f.model.forEach((c,v)=>{const r=f.node.slice(v*30,v*30+30);s.push({name:c.name,type:"scatter3D",data:r,symbolSize:8,symbol:n,label:{show:!1,formatter:""},itemStyle:{color:m[v],opacity:1}})}),s.push({name:"Geocultural sphere",type:"scatter3D",data:f.culture,symbolSize:18,itemStyle:{opacity:1,color:"#1093FF"},label:{show:!0,formatter:"{b}",textStyle:{color:"#fff",fontSize:16,backgroundColor:"rgba(255,255,255,0)"}}}),a=Object.assign([],s);const l={legend:{show:!0,width:"1100",textStyle:{color:"#fff"}},tooltip:{appendToBody:!0,className:"tooltip",hideDelay:1e3,enterable:!0,triggerOn:"click",backgroundColor:"#0A111F",borderColor:"#0A111F",textStyle:{color:"#fff"},formatter:function(c){return c.data.type=="node"?`<div style="padding: 6px 28px;">
                  <pre style="text-align: left; white-space: pre-line;">${c.data.name}</pre>
                </div>`:""}},xAxis3D:{type:"value"},yAxis3D:{type:"value"},zAxis3D:{type:"value"},grid3D:{axisLine:{lineStyle:{color:"rgba(255,255,255,0.3)"}},axisPointer:{show:!1},splitLine:{lineStyle:{color:"rgba(255,255,255,0.3)"}},viewControl:{autoRotate:!0,autoRotateSpeed:2,autoRotateAfterStill:1,distance:130},top:"6%"},series:s};u.setOption(l);var d=!1;u.on("click",function(c){const v=u.getOption().series;c.data.type=="model"&&(d=!0,v.forEach(r=>{r.name&&r.name!=c.name&&(r.itemStyle={opacity:.1}),r.name||r.data.forEach(b=>{b.name!=c.name&&(b.itemStyle={opacity:.1})})}),u.setOption({series:v}))}),u.on("mousemove",function(c){d&&(u.setOption({series:a}),d=!1)})}const p=y(null);let u=null;return e({setValueSpacesData:async f=>{if(f.length==0)return;const n=f.map(function(s){return s.model_name});console.log(n),o.value=!0,T({input:n}).then(s=>{console.log(s);let d=s.data;const c={culture:[],model:[],node:[]};c.culture=d.tsne_cultures.map((v,r)=>({name:d.tsne_culture_caption[r],value:v})),c.model=d.tsne_models.map((v,r)=>({name:d.tsne_model_caption[r],value:v,type:"model",itemStyle:{color:m[r],opacity:1}})),i(c)}).catch(s=>{console.log("err")}).finally(()=>{o.value=!1})}}),$(async()=>{await w()}),(f,n)=>{const s=se;return D(),E("div",null,[g("div",re,[g("div",ie,[g("div",ce,[V((D(),E("div",ue,[g("div",{class:"chart",style:{width:"1180px",height:"700px","background-color":"#121f37",padding:"2em 0","border-radius":"0.5em"},ref_key:"chartDom",ref:p},null,512)])),[[s,o.value]])]),de])])])}}},ye=Q(me,[["__scopeId","data-v-29984c17"]]),fe={class:""},pe=g("p",{style:{"text-align":"center",color:"#747474"}},"The heatmap illustrates the Pearson correlation between theÂ values of various models and countries.",-1),xe={__name:"CulturalAlignment",setup(t,{expose:e}){const o=y([]),a=y(null);let m=null;const i=y(),p=y();let u=[];const h=async()=>X.get("./data/value_sim_heatmap.json").then(n=>{console.log(n),i.value=n.data;const s={};for(let l=0;l<n.data.models.length;l++)s[n.data.models[l]]=n.data.cosine_sim_matrix[l];p.value=s}),f=n=>{o.value=n;let s=[];if(n&&n.length>0){let r=[];for(var l=0;l<n.length;l++)r.push(p.value[n[l]]);s={cosine_sim_matrix:r,models:n,countries:u}}else s={cosine_sim_matrix:[],models:[],countries:u};console.log("modelNameList",n,s);var d=[];for(let r=0;r<s.cosine_sim_matrix.length;r++)if(s.cosine_sim_matrix[r])for(let b=0;b<s.countries.length;b++)d.push([r,b,s.cosine_sim_matrix[r][b]]);const c=s.models,v=d.map(function(r){return[r[1],r[0],(r[2]*100).toFixed(3)||"-"]});m.setOption({yAxis:{type:"category",data:c,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},series:[{name:"Punch Card",type:"heatmap",data:v,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})};return e({setHotChart:f}),$(async()=>{await h(),await w(),u=i.value.countries;const n=i.value.models;m=L(a.value);const s={tooltip:{position:"top"},grid:{height:"60%",top:"10%",left:"2%",containLabel:!0},xAxis:{type:"category",data:u,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},yAxis:{type:"category",data:n,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",left:"center",bottom:"10%",color:["#CF1322","#FFA39E","#eeeeee","#91D5FF","#096DD9"],textStyle:{color:"#000"}}};m.setOption(s),f(o.value)}),(n,s)=>(D(),E("div",null,[g("div",fe,[g("div",null,[g("div",null,[g("div",{class:"chart",ref_key:"chartDom",ref:a,style:{width:"1200px",height:"600px",margin:"0 auto"}},null,512),pe])])])]))}};export{ye as V,xe as _};
