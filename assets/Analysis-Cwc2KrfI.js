import"./base-C-j2haYg.js";import{a as Ee,b as $e,c as He,d as Ne}from"./el-radio-DABE9Lag.js";import{_ as ye,r as n,B as Ae,g as _e,a as _,N as le,w as V,c as x,f as ee,e,M as $,t as f,F as O,p as xe,j as we,o as ne,n as Ce,ay as ze,az as Oe,K as Ve,h as D,u as fe,P as ge,G as z,L as Ie,U as Pe,i as Ue}from"./index-B2idxEpz.js";import{e as K,g as Q,h as Be,i as be}from"./common-DFtheyfs.js";import{i as qe,h as Ge}from"./html2canvas.esm-XTtUG6aq.js";import{S as We,a as Ke,P as Qe,N as Xe,A as Je,b as Ye}from"./pagination-DFPJP6Ss.js";import{E as Ze}from"./jspdf.es.min-8vcJZTIL.js";import{E as ea,a as aa}from"./index-D47qFtGL.js";const ta={components:{Swiper:We,SwiperSlide:Ke},props:{data:{type:Array,required:!0}},mounted(){console.log("接收到的消息:",this.data)},setup(g){const i=n(null),H=u=>{console.log(u),i.value=u},C=()=>{console.log("slide change")},S=n(g.data);return Ae(()=>g.data,(u,M)=>{S.value=u,i.value&&i.value.slideTo(0),console.log(S.value)}),{onSwiper:H,onSlideChange:C,modules:[Qe,Xe,Je,Ye],caseData:S}}},re=g=>(xe("data-v-7ab5f089"),g=g(),we(),g),sa={class:"swiper-main",tabindex:"0"},oa={class:"title"},la=re(()=>e("span",null,"Score：",-1)),na={class:"title"},ra={style:{"font-style":"normal"}},ca={class:"chart-content-desc"},ia=re(()=>e("span",{class:"span"},"Q",-1)),ua={class:"chart-content-desc"},da=re(()=>e("span",{class:"span"},"A",-1)),va=["innerHTML"];function ha(g,i,H,C,S,u){const M=_e("swiper-slide"),h=_e("swiper",!0);return _(),le(h,{modules:C.modules,navigation:!0,pagination:{clickable:!0},onSwiper:C.onSwiper},{default:V(()=>[(_(!0),x(O,null,ee(C.caseData,(v,R)=>(_(),le(M,{class:"swiper-slide",key:v.model+R},{default:V(()=>[e("div",sa,[e("p",oa,[la,$(f(v.score.toFixed(4)),1)]),e("p",na,[$(f("Case"+(R+1)+" - "),1),e("i",ra,f(v.label),1),$(" Score")]),e("div",ca,[ia,e("p",null,f(v.prompt),1)]),e("div",ua,[da,e("p",{class:"highlight",innerHTML:v.highlight},null,8,va)])])]),_:2},1024))),128))]),_:1},8,["modules","onSwiper"])}const pa=ye(ta,[["render",ha],["__scopeId","data-v-7ab5f089"]]),X={__name:"EchartComponent",props:{hasHightlight:{type:Boolean,required:!1,default:!0}},emits:["setCurrentCaseData"],setup(g,{expose:i,emit:H}){const C=g,S=n(null);let u=null,M=0,h=100;i({setRadarChart:b=>{const r=Object.values(b);M=Math.ceil(Math.max(...r)*1)/1,h=Math.floor(Math.min(...r)*1)/1-10;const T=Object.keys(b).map((s,N)=>({name:s,color:C.hasHightlight&&N==0?"rgba(16, 147, 255, 1)":"black",axisLabel:{show:N==0},min:h,max:M})),p=Object.values(b);u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},splitNumber:5,axisName:{fontSize:14,color:"black",formatter:function(s){return s.split("&").join(`&
`)}},axisLabel:{formatter:function(s){return s.toFixed(0)}},triggerEvent:!0,indicator:T},series:[{type:"radar",symbolSize:8,itemStyle:{color:"#1093FF"},data:[{value:p,areaStyle:{opacity:.3,color:"#1093FF"},lineStyle:{width:2,color:"#1093FF"}}]}]})},setRadarHighlight:(b,r)=>{const T=Object.keys(b).map((p,s)=>({name:p,color:r==p?"rgba(16, 147, 255, 1)":"black",axisLabel:{show:s==0},min:h,max:M}));u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},splitNumber:5,axisName:{fontSize:14,color:"black",formatter:function(p){return p.split("&").join(`&
`)}},triggerEvent:!0,indicator:T}})}}),ne(async()=>{await Ce(),u=qe(S.value);const b={radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisLabel:{show:!0,fontSize:14},axisName:{fontSize:14,color:"black"},triggerEvent:!0,indicator:[{name:"Benevolence",max:1,color:"rgba(16, 147, 255, 1)"},{name:"Achievement",max:1,axisLabel:{show:!1}},{name:"Universalism",max:1,axisLabel:{show:!1}},{name:"Tradition",max:1,axisLabel:{show:!1}},{name:"Stimulation",max:1,axisLabel:{show:!1}},{name:"Self-direction",max:1,axisLabel:{show:!1}},{name:"Security",max:1,axisLabel:{show:!1}},{name:"Power",max:1,axisLabel:{show:!1}},{name:"Hedonism",max:1,axisLabel:{show:!1}},{name:"Conformity",max:1,axisLabel:{show:!1}}]}};u.setOption(b),u.on("click",function(r){if(r.componentType==="radar"&&r.targetType=="axisName"){const p=u.getOption().radar[0].indicator.map(s=>(r.name=r.name.replace(/[\r\n]/g,""),s.name!=r.name&&s.color=="rgba(16, 147, 255, 1)"&&delete s.color,s.name==r.name&&s.color!=="rgba(16, 147, 255, 1)"&&(s.color="rgba(16, 147, 255, 1)",d("setCurrentCaseData",s.name)),s));u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisName:{fontSize:14,color:"black"},triggerEvent:!0,indicator:p}})}}),u.on("mouseout",function(r){if(r.componentType==="radar"&&r.targetType=="axisName"){const p=u.getOption().radar[0].indicator.map(s=>(s.name==r.name&&s.color!=="rgba(16, 147, 255, 1)"&&delete s.color,s));u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisName:{fontSize:14,color:"black"},triggerEvent:!0,indicator:p}})}})});const d=H;return(b,r)=>(_(),x("div",{style:{width:"100%",height:"100%"},ref_key:"chartDom",ref:S},null,512))}},I=g=>(xe("data-v-de4e3c45"),g=g(),we(),g),ma={class:"bg main-container"},_a={class:""},fa={class:"title-content"},ga={class:"model"},ba={id:"popoverId2"},ya={style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"flex-start","margin-top":"1.5em"}},xa={key:0,class:"model-props"},wa={class:"model-prop"},Ca=I(()=>e("span",{class:"prop-name"},"Developer: ",-1)),Sa={class:"prop-content"},ka={class:"model-prop"},Da=I(()=>e("span",{class:"prop-name"},"Website/GitHub: ",-1)),Ra={class:"prop-content"},Ta=["href"],La={class:"model-prop"},Ma=I(()=>e("span",{class:"prop-name"},"Paper/Report: ",-1)),ja={class:"prop-content"},Fa=["href"],Ea={class:"model-prop"},$a=I(()=>e("span",{class:"prop-name"},"Type: ",-1)),Ha={class:"prop-content"},Na={class:"model-prop"},Aa=I(()=>e("span",{class:"prop-name"},"Publish Date: ",-1)),za={class:"prop-content"},Oa=I(()=>e("div",{class:"model-prop"},[e("span",{class:"prop-name"},"Measurement Date: "),e("span",{class:"prop-content"},"2025/2")],-1)),Va={style:{width:"9em"}},Ia={class:"chart-box"},Pa={class:"chart-tab"},Ua=I(()=>e("div",{class:"chart-tab-title"},"Evaluation Results",-1)),Ba=["onClick"],qa={class:"chart-main"},Ga={class:"chart-container"},Wa={class:"charts-box"},Ka={class:"chart-text-main"},Qa={class:"chart-menu"},Xa=["onClick"],Ja=["innerHTML"],Ya={class:"chart-content"},Za={class:"chart-title"},et={class:"download-charts-box"},at={__name:"Analysis",setup(g){const i=n(null),H=n(null),C=n(null),S=n(null),u=n(null),M=[{name:"Schwartz Theory of Basic Values",index:0,children:[{name:"Evaluation Results and cases",index:0},{name:"Distance between national values",index:1}]},{name:"Moral Foundation Theory",index:1,children:[{name:"Evaluation Results and cases",index:0},{name:"Distance between national values",index:1}]},{name:"Safety Taxonomy",index:2},{name:"LLMs' Unique Value System",index:3}],h=n([]),v=n(""),R=n([]);var d=null,b=null,r=null,T=null,p=null,s=null,N=null,ae=null,B=null,te=null;const J=n([]),se=n(),Y=n(!1),P=n("GPT-4-Turbo"),t=n("GPT-4-Turbo"),L=n(null),j=a=>K.get(a),Se=async()=>{try{K.all([j("./data/models_info.json"),j("./data/Schwartz_scores.json"),j("./data/Schwartz_cases.json")]).then(K.spread(function(a,c,E){b=Q(a.data.data),r=Q(c.data.data),T=E.data.data,J.value=Object.keys(b),!P.value&&!t.value&&(P.value=J.value[0],t.value=J.value[0]),L.value=b[t.value],i.value.setRadarChart(r[t.value]),d=F(T,t.value),h.value=Object.keys(d).sort(),Z(h.value[0]),v.value=h.value[0],R.value=d[v.value],H.value.setRadarChart(r[t.value]),C.value.setRadarChart(N[t.value]),S.value.setRadarChart(p[t.value]),u.value.setRadarChart(B[t.value])}))}catch(a){console.error("Fetch error:",a)}},ke=async()=>{try{K.all([j("./data/Risk_scores.json"),j("./data/Risk_cases.json"),j("./data/MFT_scores.json"),j("./data/MFT_cases.json"),j("./data/FULVa_scores.json"),j("./data/FULVa_cases.json")]).then(K.spread(function(a,c,E,w,m,y){p=Q(a.data.data),s=c.data.data,N=Q(E.data.data),ae=w.data.data,B=Q(m.data.data),te=y.data.data}))}catch(a){console.error("Fetch error:",a)}};Se(),ke();function F(a,c){return a.filter(w=>w.model==c).reduce((w,m)=>{w[m.value]||(w[m.value]=[]);const{model:y,...W}=m;return w[m.value].push({model:y,...W}),w},{})}ne(async()=>{await Ce()});const De=a=>{console.log(a)},Z=a=>{v.value=a,R.value=d[v.value],o.value==0?i.value.setRadarHighlight(r[t.value],a):o.value==1?i.value.setRadarHighlight(N[t.value],a):o.value==2?i.value.setRadarHighlight(p[t.value],a):o.value==3&&i.value.setRadarHighlight(B[t.value],a)},ce=()=>{t.value=P.value,Y.value=!1,L.value=b[t.value],console.log(o.value),console.log(t.value),o.value==0?(i.value.setRadarChart(r[t.value]),d=F(T,t.value)):o.value==1?(i.value.setRadarChart(N[t.value]),d=F(ae,t.value)):o.value==2?(i.value.setRadarChart(p[t.value]),d=F(s,t.value)):o.value==3&&(i.value.setRadarChart(B[t.value]),d=F(te,t.value)),console.log(d),h.value=Object.keys(d).sort(),Z(h.value[0]),v.value=h.value[0],R.value=d[v.value]},o=n(0),Re=a=>{o.value=a,o.value==0?(i.value.setRadarChart(r[t.value]),d=F(T,t.value)):o.value==1?(i.value.setRadarChart(N[t.value]),d=F(ae,t.value)):o.value==2?(i.value.setRadarChart(p[t.value]),d=F(s,t.value)):o.value==3&&(i.value.setRadarChart(B[t.value]),d=F(te,t.value)),h.value=Object.keys(d).sort(),Z(h.value[0]),v.value=h.value[0],R.value=d[v.value]},ie=n(!0),ue=a=>{ie.value=a};ze(()=>{});let de=!0;const ve=Oe();Ve(()=>{console.log("首页传过来的modelName："+ve.query.modelName);const a=ve.query.modelName;a&&(P.value=a,t.value=a,de?de=!1:ce())}),ne(()=>{document.addEventListener("click",Te)});const Te=a=>{const c=document.getElementById("popoverId2");se.value&&c&&!c.contains(a.target)&&(Y.value=!1)},q=a=>{v.value=a,R.value=d[v.value]},G=n(!1),Le=async()=>{console.log("downloadAll"),!G.value&&(G.value=!0,await Me(null),G.value=!1)};n(null),n(null),n(null),n(null);const Me=async a=>{const c=[[{name:"Schwartz Theory of Basic Values",chart:H.value.$refs.chartDom},{name:"Moral Foundation Theory",chart:C.value.$refs.chartDom},{name:"Safety Taxonomy",chart:S.value.$refs.chartDom},{name:"LLMs' Unique Value System",chart:u.value.$refs.chartDom}]];console.log(a),a||(a=new Ze("p","mm","a4"));const E=a.internal.pageSize.getWidth(),w=a.internal.pageSize.getHeight(),m=10;let y=m;for(let A=0;A<c.length;A++){A>0&&(a.addPage(),y=m);for(let U=0;U<c[A].length;U++){const k=(await Ge(c[A][U].chart)).toDataURL("image/png"),he=a.getImageProperties(k),pe=E-2*m,oe=he.height*pe/he.width;y+oe>w-m&&(a.addPage(),y=m);const me=c[A][U].name,je=a.getTextWidth(me),Fe=(E-je)/2;a.text(me,Fe,y),y+=8,a.addImage(k,"PNG",m,y,pe,oe),y+=oe+m+5}}const W=t.value+"_"+Be();a.save(W+".pdf")};return(a,c)=>{const E=Ue,w=Ee,m=ea,y=aa,W=$e,A=He,U=Ne;return _(),x("div",ma,[e("div",_a,[e("div",fa,[e("div",ga,[D(w,{effect:"customized",content:"Switch model",placement:"top"},{default:V(()=>[Ie((_(),x("div",{class:"model-type model-flex",onClick:c[0]||(c[0]=Pe(l=>Y.value=!0,["stop"]))},[$(f(t.value)+" ",1),D(E,{class:"down-arrow",name:"down-arrow"})])),[[U,se.value]])]),_:1}),D(W,{ref_key:"popoverRef",ref:se,visible:Y.value,placement:"bottom-start",width:576,trigger:"click","virtual-triggering":"",persistent:""},{default:V(()=>[e("div",ba,[D(y,{modelValue:P.value,"onUpdate:modelValue":c[1]||(c[1]=l=>P.value=l),onChange:De},{default:V(()=>[(_(!0),x(O,null,ee(J.value,l=>(_(),le(m,{key:l,value:l},{default:V(()=>[$(f(l),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e("div",{style:{display:"flex","justify-content":"flex-end","margin-top":"20px","padding-right":"20px"}},[e("button",{onClick:ce},"Submit")])])]),_:1},8,["visible"])]),e("div",ya,[L.value?(_(),x("div",xa,[e("div",wa,[Ca,e("span",Sa,f(L.value.affiliation),1)]),e("div",ka,[Da,e("span",Ra,[e("a",{href:fe(be)(L.value.website),target:"_blank"},f(L.value.website),9,Ta)])]),e("div",La,[Ma,e("span",ja,[e("a",{href:fe(be)(L.value.report),target:"_blank"},f(L.value.report),9,Fa)])]),e("div",Ea,[$a,e("span",Ha,f(L.value.type)+"-Source",1)]),e("div",Na,[Aa,e("span",za,f(L.value["release date"].split(" ")[0]),1)]),Oa])):ge("",!0),e("div",Va,[D(A,{style:{"font-size":"0.875em"},plain:"",color:"#004f8f",onClick:Le,disabled:G.value,loading:G.value},{default:V(()=>[$(" Download All ")]),_:1},8,["disabled","loading"])])])])]),e("div",Ia,[e("div",Pa,[Ua,e("ul",null,[(_(),x(O,null,ee(M,l=>e("li",{class:z({active:o.value==l.index}),onClick:k=>Re(l.index),key:l.index},f(l.name),11,Ba)),64))])]),e("div",qa,[e("div",{class:z(["chart-main-chart",ie.value?"":"close"])},[e("span",{class:"case-open-btn",onClick:c[2]||(c[2]=l=>ue(!0))},"Cases"),e("div",Ga,[e("div",Wa,[D(X,{class:"chart",onSetCurrentCaseData:q,ref_key:"chartDom0",ref:i},null,512)])]),e("div",Ka,[e("div",Qa,[e("ul",null,[(_(!0),x(O,null,ee(h.value,l=>(_(),x("li",{key:l,onClick:k=>Z(l),class:z({active:v.value==l})},[o.value==0?(_(),x(O,{key:0},[$(f(l.indexOf("-")>-1?l.split("-").map(k=>k[0].toUpperCase()).join(""):l.substring(0,3)),1)],64)):o.value==1?(_(),x("span",{key:1,style:{"margin-right":"1em"},innerHTML:l.split("/").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join("/<br>")},null,8,Ja)):o.value==2?(_(),x(O,{key:2},[$(f(l.split(" ").map(k=>k.charAt(0).toUpperCase()).join("")),1)],64)):o.value==3?(_(),x(O,{key:3},[$(f(l),1)],64)):ge("",!0)],10,Xa))),128))])]),e("div",Ya,[e("span",{class:"case-close-btn",onClick:c[3]||(c[3]=l=>ue(!1))}),D(pa,{data:R.value},null,8,["data"])])])],2),e("p",Za,f(M[o.value].name)+" Evaluation Results and cases ",1)]),e("div",et,[D(X,{class:z(["chart",{show:o.value==0}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom1",ref:H},null,8,["class"]),D(X,{class:z(["chart",{show:o.value==1}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom2",ref:C},null,8,["class"]),D(X,{class:z(["chart",{show:o.value==2}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom3",ref:S},null,8,["class"]),D(X,{class:z(["chart",{show:o.value==3}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom4",ref:u},null,8,["class"])])])])}}},ut=ye(at,[["__scopeId","data-v-de4e3c45"]]);export{ut as default};
