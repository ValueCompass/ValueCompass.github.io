import"./base-CWYjjNBY.js";import{a as Fe,b as Ee,c as $e,d as He}from"./el-radio-Cj5NNIx8.js";import{_ as be,r as n,B as Ae,g as _e,a as m,N as oe,w as V,c as x,f as Z,e,M as H,t as f,F as O,p as ye,j as xe,o as le,n as we,ay as Ne,az as ze,K as Oe,h as D,u as me,P as fe,G as z,L as Ve,U as Ie,i as Pe}from"./index-BZ0M0jK3.js";import{e as W,g as K,h as ge}from"./common-tlAb1m1p.js";import{i as Ue,h as Be}from"./html2canvas.esm-XTtUG6aq.js";import{S as qe,a as Ge,P as We,N as Ke,A as Qe,b as Xe}from"./pagination-DQO_dF-p.js";import{E as Je}from"./jspdf.es.min-BzC0i6zR.js";import{E as Ye,a as Ze}from"./index-Dr77kloV.js";const ea={components:{Swiper:qe,SwiperSlide:Ge},props:{data:{type:Array,required:!0}},mounted(){console.log("接收到的消息:",this.data)},setup(g){const i=n(null),A=u=>{console.log(u),i.value=u},C=()=>{console.log("slide change")},S=n(g.data);return Ae(()=>g.data,(u,j)=>{S.value=u,i.value&&i.value.slideTo(0),console.log(S.value)}),{onSwiper:A,onSlideChange:C,modules:[We,Ke,Qe,Xe],caseData:S}}},ne=g=>(ye("data-v-7ab5f089"),g=g(),xe(),g),aa={class:"swiper-main",tabindex:"0"},ta={class:"title"},sa=ne(()=>e("span",null,"Score：",-1)),oa={class:"title"},la={style:{"font-style":"normal"}},na={class:"chart-content-desc"},ra=ne(()=>e("span",{class:"span"},"Q",-1)),ca={class:"chart-content-desc"},ia=ne(()=>e("span",{class:"span"},"A",-1)),ua=["innerHTML"];function da(g,i,A,C,S,u){const j=_e("swiper-slide"),h=_e("swiper",!0);return m(),oe(h,{modules:C.modules,navigation:!0,pagination:{clickable:!0},onSwiper:C.onSwiper},{default:V(()=>[(m(!0),x(O,null,Z(C.caseData,(v,R)=>(m(),oe(j,{class:"swiper-slide",key:v.model+R},{default:V(()=>[e("div",aa,[e("p",ta,[sa,H(f(v.score.toFixed(4)),1)]),e("p",oa,[H(f("Case"+(R+1)+" - "),1),e("i",la,f(v.label),1),H(" Score")]),e("div",na,[ra,e("p",null,f(v.prompt),1)]),e("div",ca,[ia,e("p",{class:"highlight",innerHTML:v.highlight},null,8,ua)])])]),_:2},1024))),128))]),_:1},8,["modules","onSwiper"])}const va=be(ea,[["render",da],["__scopeId","data-v-7ab5f089"]]),Q={__name:"EchartComponent",props:{hasHightlight:{type:Boolean,required:!1,default:!0}},emits:["setCurrentCaseData"],setup(g,{expose:i,emit:A}){const C=g,S=n(null);let u=null,j=0,h=100;i({setRadarChart:b=>{const r=Object.values(b);j=Math.ceil(Math.max(...r)*1)/1,h=Math.floor(Math.min(...r)*1)/1-10;const T=Object.keys(b).map((o,N)=>({name:o,color:C.hasHightlight&&N==0?"rgba(16, 147, 255, 1)":"black",axisLabel:{show:N==0},min:h,max:j})),p=Object.values(b);u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},splitNumber:5,axisName:{fontSize:14,color:"black",formatter:function(o){return o.split("&").join(`&
`)}},axisLabel:{formatter:function(o){return o.toFixed(0)}},triggerEvent:!0,indicator:T},series:[{type:"radar",symbolSize:8,itemStyle:{color:"#1093FF"},data:[{value:p,areaStyle:{opacity:.3,color:"#1093FF"},lineStyle:{width:2,color:"#1093FF"}}]}]})},setRadarHighlight:(b,r)=>{const T=Object.keys(b).map((p,o)=>({name:p,color:r==p?"rgba(16, 147, 255, 1)":"black",axisLabel:{show:o==0},min:h,max:j}));u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},splitNumber:5,axisName:{fontSize:14,color:"black",formatter:function(p){return p.split("&").join(`&
`)}},triggerEvent:!0,indicator:T}})}}),le(async()=>{await we(),u=Ue(S.value);const b={radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisLabel:{show:!0,fontSize:14},axisName:{fontSize:14,color:"black"},triggerEvent:!0,indicator:[{name:"Benevolence",max:1,color:"rgba(16, 147, 255, 1)"},{name:"Achievement",max:1,axisLabel:{show:!1}},{name:"Universalism",max:1,axisLabel:{show:!1}},{name:"Tradition",max:1,axisLabel:{show:!1}},{name:"Stimulation",max:1,axisLabel:{show:!1}},{name:"Self-direction",max:1,axisLabel:{show:!1}},{name:"Security",max:1,axisLabel:{show:!1}},{name:"Power",max:1,axisLabel:{show:!1}},{name:"Hedonism",max:1,axisLabel:{show:!1}},{name:"Conformity",max:1,axisLabel:{show:!1}}]}};u.setOption(b),u.on("click",function(r){if(r.componentType==="radar"&&r.targetType=="axisName"){const p=u.getOption().radar[0].indicator.map(o=>(r.name=r.name.replace(/[\r\n]/g,""),o.name!=r.name&&o.color=="rgba(16, 147, 255, 1)"&&delete o.color,o.name==r.name&&o.color!=="rgba(16, 147, 255, 1)"&&(o.color="rgba(16, 147, 255, 1)",d("setCurrentCaseData",o.name)),o));u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisName:{fontSize:14,color:"black"},triggerEvent:!0,indicator:p}})}}),u.on("mouseout",function(r){if(r.componentType==="radar"&&r.targetType=="axisName"){const p=u.getOption().radar[0].indicator.map(o=>(o.name==r.name&&o.color!=="rgba(16, 147, 255, 1)"&&delete o.color,o));u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisName:{fontSize:14,color:"black"},triggerEvent:!0,indicator:p}})}})});const d=A;return(b,r)=>(m(),x("div",{style:{width:"100%",height:"100%"},ref_key:"chartDom",ref:S},null,512))}},I=g=>(ye("data-v-7bf65d8e"),g=g(),xe(),g),ha={class:"bg main-container"},pa={class:""},_a={class:"title-content"},ma={class:"model"},fa={id:"popoverId2"},ga={style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"flex-start","margin-top":"1.5em"}},ba={key:0,class:"model-props"},ya={class:"model-prop"},xa=I(()=>e("span",{class:"prop-name"},"Developer: ",-1)),wa={class:"prop-content"},Ca={class:"model-prop"},Sa=I(()=>e("span",{class:"prop-name"},"Website/GitHub: ",-1)),ka={class:"prop-content"},Da=["href"],Ra={class:"model-prop"},Ta=I(()=>e("span",{class:"prop-name"},"Paper/Report: ",-1)),La={class:"prop-content"},Ma=["href"],ja={class:"model-prop"},Fa=I(()=>e("span",{class:"prop-name"},"Type: ",-1)),Ea={class:"prop-content"},$a={class:"model-prop"},Ha=I(()=>e("span",{class:"prop-name"},"Publish Date: ",-1)),Aa={class:"prop-content"},Na=I(()=>e("div",{class:"model-prop"},[e("span",{class:"prop-name"},"Measurement Date: "),e("span",{class:"prop-content"},"2025/2")],-1)),za={style:{width:"9em"}},Oa={class:"chart-box"},Va={class:"chart-tab"},Ia=I(()=>e("div",{class:"chart-tab-title"},"Evaluation Results",-1)),Pa=["onClick"],Ua={class:"chart-main"},Ba={class:"chart-container"},qa={class:"charts-box"},Ga={class:"chart-text-main"},Wa={class:"chart-menu"},Ka=["onClick"],Qa=["innerHTML"],Xa={class:"chart-content"},Ja={class:"chart-title"},Ya={class:"download-charts-box"},Za={__name:"Analysis",setup(g){const i=n(null),A=n(null),C=n(null),S=n(null),u=n(null),j=[{name:"Schwartz Theory of Basic Values",index:0,children:[{name:"Evaluation Results and cases",index:0},{name:"Distance between national values",index:1}]},{name:"Moral Foundation Theory",index:1,children:[{name:"Evaluation Results and cases",index:0},{name:"Distance between national values",index:1}]},{name:"Safety Taxonomy",index:2},{name:"LLMs' Unique Value System",index:3}],h=n([]),v=n(""),R=n([]);var d=null,b=null,r=null,T=null,p=null,o=null,N=null,ee=null,B=null,ae=null;const X=n([]),te=n(),J=n(!1),P=n("GPT-4-Turbo"),t=n("GPT-4-Turbo"),L=n(null),F=a=>W.get(a),Ce=async()=>{try{W.all([F("./data/models_info.json"),F("./data/Schwartz_scores.json"),F("./data/Schwartz_cases.json")]).then(W.spread(function(a,c,$){b=K(a.data.data),r=K(c.data.data),T=$.data.data,X.value=Object.keys(b),!P.value&&!t.value&&(P.value=X.value[0],t.value=X.value[0]),L.value=b[t.value],i.value.setRadarChart(r[t.value]),d=E(T,t.value),h.value=Object.keys(d).sort(),Y(h.value[0]),v.value=h.value[0],R.value=d[v.value],A.value.setRadarChart(r[t.value]),C.value.setRadarChart(N[t.value]),S.value.setRadarChart(p[t.value]),u.value.setRadarChart(B[t.value])}))}catch(a){console.error("Fetch error:",a)}},Se=async()=>{try{W.all([F("./data/Risk_scores.json"),F("./data/Risk_cases.json"),F("./data/MFT_scores.json"),F("./data/MFT_cases.json"),F("./data/FULVa_scores.json"),F("./data/FULVa_cases.json")]).then(W.spread(function(a,c,$,w,_,y){p=K(a.data.data),o=c.data.data,N=K($.data.data),ee=w.data.data,B=K(_.data.data),ae=y.data.data}))}catch(a){console.error("Fetch error:",a)}};Ce(),Se();function E(a,c){return a.filter(w=>w.model==c).reduce((w,_)=>{w[_.value]||(w[_.value]=[]);const{model:y,...M}=_;return w[_.value].push({model:y,...M}),w},{})}le(async()=>{await we()});const ke=a=>{console.log(a)},Y=a=>{v.value=a,R.value=d[v.value],l.value==0?i.value.setRadarHighlight(r[t.value],a):l.value==1?i.value.setRadarHighlight(N[t.value],a):l.value==2?i.value.setRadarHighlight(p[t.value],a):l.value==3&&i.value.setRadarHighlight(B[t.value],a)},re=()=>{t.value=P.value,J.value=!1,L.value=b[t.value],console.log(l.value),console.log(t.value),l.value==0?(i.value.setRadarChart(r[t.value]),d=E(T,t.value)):l.value==1?(i.value.setRadarChart(N[t.value]),d=E(ee,t.value)):l.value==2?(i.value.setRadarChart(p[t.value]),d=E(o,t.value)):l.value==3&&(i.value.setRadarChart(B[t.value]),d=E(ae,t.value)),console.log(d),h.value=Object.keys(d).sort(),Y(h.value[0]),v.value=h.value[0],R.value=d[v.value]},l=n(0),De=a=>{l.value=a,l.value==0?(i.value.setRadarChart(r[t.value]),d=E(T,t.value)):l.value==1?(i.value.setRadarChart(N[t.value]),d=E(ee,t.value)):l.value==2?(i.value.setRadarChart(p[t.value]),d=E(o,t.value)):l.value==3&&(i.value.setRadarChart(B[t.value]),d=E(ae,t.value)),h.value=Object.keys(d).sort(),Y(h.value[0]),v.value=h.value[0],R.value=d[v.value]},ce=n(!0),ie=a=>{ce.value=a};Ne(()=>{});let ue=!0;const de=ze();Oe(()=>{console.log("首页传过来的modelName："+de.query.modelName);const a=de.query.modelName;a&&(P.value=a,t.value=a,ue?ue=!1:re())}),le(()=>{document.addEventListener("click",Re)});const Re=a=>{const c=document.getElementById("popoverId2");te.value&&c&&!c.contains(a.target)&&(J.value=!1)},q=a=>{v.value=a,R.value=d[v.value]},G=n(!1),Te=async()=>{console.log("downloadAll"),!G.value&&(G.value=!0,await Le(null),G.value=!1)};n(null),n(null),n(null),n(null);const Le=async a=>{const c=[[{name:"Schwartz Theory of Basic Values",chart:A.value.$refs.chartDom},{name:"Moral Foundation Theory",chart:C.value.$refs.chartDom},{name:"Safety Taxonomy",chart:S.value.$refs.chartDom},{name:"LLMs' Unique Value System",chart:u.value.$refs.chartDom}]];console.log(a),a||(a=new Je("p","mm","a4"));const $=a.internal.pageSize.getWidth(),w=a.internal.pageSize.getHeight(),_=10;let y=_;for(let M=0;M<c.length;M++){M>0&&(a.addPage(),y=_);for(let U=0;U<c[M].length;U++){const s=(await Be(c[M][U].chart)).toDataURL("image/png"),k=a.getImageProperties(s),he=$-2*_,se=k.height*he/k.width;y+se>w-_&&(a.addPage(),y=_);const pe=c[M][U].name,Me=a.getTextWidth(pe),je=($-Me)/2;a.text(pe,je,y),y+=8,a.addImage(s,"PNG",_,y,he,se),y+=se+_+5}}a.save("charts.pdf")};return(a,c)=>{const $=Pe,w=Fe,_=Ye,y=Ze,M=Ee,U=$e,ve=He;return m(),x("div",ha,[e("div",pa,[e("div",_a,[e("div",ma,[D(w,{effect:"customized",content:"Switch model",placement:"top"},{default:V(()=>[Ve((m(),x("div",{class:"model-type model-flex",onClick:c[0]||(c[0]=Ie(s=>J.value=!0,["stop"]))},[H(f(t.value)+" ",1),D($,{class:"down-arrow",name:"down-arrow"})])),[[ve,te.value]])]),_:1}),D(M,{ref_key:"popoverRef",ref:te,visible:J.value,placement:"bottom-start",width:576,trigger:"click","virtual-triggering":"",persistent:""},{default:V(()=>[e("div",fa,[D(y,{modelValue:P.value,"onUpdate:modelValue":c[1]||(c[1]=s=>P.value=s),onChange:ke},{default:V(()=>[(m(!0),x(O,null,Z(X.value,s=>(m(),oe(_,{key:s,value:s},{default:V(()=>[H(f(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e("div",{style:{display:"flex","justify-content":"flex-end","margin-top":"20px","padding-right":"20px"}},[e("button",{onClick:re},"Submit")])])]),_:1},8,["visible"])]),e("div",ga,[L.value?(m(),x("div",ba,[e("div",ya,[xa,e("span",wa,f(L.value.affiliation),1)]),e("div",Ca,[Sa,e("span",ka,[e("a",{href:me(ge)(L.value.website),target:"_blank"},f(L.value.website),9,Da)])]),e("div",Ra,[Ta,e("span",La,[e("a",{href:me(ge)(L.value.report),target:"_blank"},f(L.value.report),9,Ma)])]),e("div",ja,[Fa,e("span",Ea,f(L.value.type)+"-Source",1)]),e("div",$a,[Ha,e("span",Aa,f(L.value["release date"].split(" ")[0]),1)]),Na])):fe("",!0),e("div",za,[D(U,{style:{"font-size":"0.875em"},plain:"",color:"#004f8f",onClick:Te,disabled:G.value,loading:G.value},{default:V(()=>[H(" Download All ")]),_:1},8,["disabled","loading"])])])])]),e("div",Oa,[e("div",Va,[Ia,e("ul",null,[(m(),x(O,null,Z(j,s=>e("li",{class:z({active:l.value==s.index}),onClick:k=>De(s.index),key:s.index},f(s.name),11,Pa)),64))])]),e("div",Ua,[e("div",{class:z(["chart-main-chart",ce.value?"":"close"])},[e("span",{class:"case-open-btn",onClick:c[2]||(c[2]=s=>ie(!0))},"Cases"),e("div",Ba,[e("div",qa,[D(Q,{class:"chart",onSetCurrentCaseData:q,ref_key:"chartDom0",ref:i},null,512)])]),e("div",Ga,[e("div",Wa,[e("ul",null,[(m(!0),x(O,null,Z(h.value,s=>(m(),x("li",{key:s,onClick:k=>Y(s),class:z({active:v.value==s})},[l.value==0?(m(),x(O,{key:0},[H(f(s.indexOf("-")>-1?s.split("-").map(k=>k[0].toUpperCase()).join(""):s.substring(0,3)),1)],64)):l.value==1?(m(),x("span",{key:1,style:{"margin-right":"1em"},innerHTML:s.split("/").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join("/<br>")},null,8,Qa)):l.value==2?(m(),x(O,{key:2},[H(f(s.split(" ").map(k=>k.charAt(0).toUpperCase()).join("")),1)],64)):l.value==3?(m(),x(O,{key:3},[H(f(s),1)],64)):fe("",!0)],10,Ka))),128))])]),e("div",Xa,[e("span",{class:"case-close-btn",onClick:c[3]||(c[3]=s=>ie(!1))}),D(va,{data:R.value},null,8,["data"])])])],2),e("p",Ja,f(j[l.value].name)+" Evaluation Results and cases ",1)]),e("div",Ya,[D(Q,{class:z(["chart",{show:l.value==0}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom1",ref:A},null,8,["class"]),D(Q,{class:z(["chart",{show:l.value==1}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom2",ref:C},null,8,["class"]),D(Q,{class:z(["chart",{show:l.value==2}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom3",ref:S},null,8,["class"]),D(Q,{class:z(["chart",{show:l.value==3}]),hasHightlight:!1,onSetCurrentCaseData:q,ref_key:"chartDom4",ref:u},null,8,["class"])])])])}}},ct=be(Za,[["__scopeId","data-v-7bf65d8e"]]);export{ct as default};
